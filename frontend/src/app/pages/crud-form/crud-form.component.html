<form [formGroup]="form" (ngSubmit)="onSubmit()">
    <div class="main">
        <div class="main-width">
            <div class="card">
                <section class="section-title">
                    <h3>Cadastrar Profissional</h3>
                </section>
                <div class="grid-um">
                    <mat-form-field appearance="outline" class="span8">
                        <mat-label>Nome</mat-label>
                        <input matInput formControlName="name">
                        <mat-error *ngIf="form.get('name')?.hasError('required')">O nome é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('name')?.hasError('minlength')">O nome deve ter pelo menos 5 caracteres.</mat-error>
                        <mat-error *ngIf="form.get('name')?.hasError('maxlength')">O nome deve ter no máximo 50 caracteres.</mat-error>
                    </mat-form-field>
                    
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Especialidade</mat-label>
                        <mat-select formControlName="specialty">
                            <mat-option *ngFor="let specialty of specialties" [value]="specialty.especialidade">
                                {{ specialty.especialidade }}
                            </mat-option>
                        </mat-select>
                        <mat-error *ngIf="form.get('specialty')?.hasError('required')">A especialidade é obrigatória.</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>CRM</mat-label>
                        <input matInput placeholder="000000/PE" formControlName="crm">
                        <mat-error *ngIf="form.get('crm')?.hasError('required')"> O CRM é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('crm')?.hasError('invalidCRM') && form.get('crm')?.dirty && !form.get('crm')?.hasError('required')">
                        O CRM deve seguir o formato correto.
                        </mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Contato</mat-label>
                        <span matPrefix>+55 &nbsp;</span>
                        <input type="tel" matInput placeholder="00 0 0000-0000" formControlName="phone">
                        <mat-error *ngIf="form.get('phone')?.hasError('required')">O telefone é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('phone')?.hasError('pattern')">O telefone deve ter 11 dígitos.</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Email</mat-label>
                        <input type="email" matInput placeholder="Ex. pat@example.com" formControlName="email">
                        <mat-error *ngIf="form.get('email')?.hasError('required')">O e-mail é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('email')?.hasError('email')">O formato do e-mail é inválido.</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Data da Contratação</mat-label>
                        <input matInput [matDatepicker]="picker" formControlName="hiringDate">
                        <mat-datepicker-toggle matIconSuffix [for]="picker"></mat-datepicker-toggle>
                        <mat-datepicker #picker></mat-datepicker>
                        <mat-error *ngIf="form.get('hiringDate')?.hasError('required')">A data de contratação é obrigatória.</mat-error>
                        <mat-error *ngIf="form.get('hiringDate')?.hasError('futureDate')">A data de contratação não pode ser no futuro.</mat-error>
                    </mat-form-field>
                    
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Início do Atendimento</mat-label>
                        <input matInput placeholder="HH:mm" type="text" formControlName="consultationStartTime">
                        <mat-error *ngIf="form.get('consultationStartTime')?.hasError('required')">O horário de início é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('consultationStartTime')?.hasError('invalidTimeFormat')">O horário deve estar no formato 24 horas (HH:mm).</mat-error>
                    </mat-form-field>
        
                    <mat-form-field appearance="outline" class="span4">
                        <mat-label>Fim do Atendimento</mat-label>
                        <input matInput placeholder="HH:mm" type="text" formControlName="consultationEndTime">
                        <mat-error *ngIf="form.get('consultationEndTime')?.hasError('required')">O horário de término é obrigatório.</mat-error>
                        <mat-error *ngIf="form.get('consultationEndTime')?.hasError('invalidTimeFormat')">O horário deve estar no formato 24 horas (HH:mm).</mat-error>
                    </mat-form-field>
                </div>
        
                <div>
                    <label for="status">Status</label>
                    <div>
                        <mat-radio-group aria-label="Selecione uma opção" formControlName="status">
                            <mat-radio-button [value]="true">Ativo(a)</mat-radio-button>
                            <mat-radio-button [value]="false">Inativo(a)</mat-radio-button>
                        </mat-radio-group> 
                    </div>
                </div>
        
                <div class="div-column-gap">
                    <label for="daysOfWeek">Dias de Atendimento</label>
                    <div formArrayName="daysOfWeek" class="days-checkbox-group">
                        <ng-container *ngFor="let control of daysOfWeekArray.controls; let i = index">
                            <mat-checkbox [formControlName]="i">{{ daysOfWeek[i].name }}</mat-checkbox>
                          </ng-container>
                    </div>
                </div>
            </div>
            <section class="footer-buttons">
                <div> 
                    <button mat-fab extended color="tertiary" [routerLink]="['/crud-list']">
                        <mat-icon>keyboard_arrow_left</mat-icon>
                        Voltar
                    </button>
                </div>
                <div> 
                    <button mat-fab extended color="primary" type="submit">
                        <mat-icon>check</mat-icon>
                        Salvar Cadastro
                        {{ isEditMode ? 'Atualizar' : 'Criar' }}
                    </button>
                </div>
        </section>
        </div>
    </div>
</form>